(()=>{"use strict";const t=document.querySelector.bind(document),e=document.querySelectorAll.bind(document),s=(t,e,s)=>t?.addEventListener(e,s),n=(t,e)=>{t&&(t.innerHTML=e)},i=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,a=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),o=(t,e="")=>{t&&e.split(" ").forEach((e=>{t.classList.add(e)}))},l=(t,e="")=>{t&&e.split(" ").forEach((e=>{t.classList.remove(e)}))},r=(t,e)=>{if(t)for(const s in e)t.style[s]=e[s]},d=t=>{e("button").forEach((e=>{s(e,"click",(e=>{t(e.target.id)}))}))},c=(t=1)=>Array.from({length:t},((t,e)=>e)),x=732,$=412,v="container",p=()=>`<div id="${v}" style="overflow: hidden;width:412px;height:732px"></div>`,h=((t,e)=>{var s;return function(){clearTimeout(s),s=setTimeout(t,e)}})((()=>{const e=t("#root"),s=Math.min(window.innerWidth/$,window.innerHeight/x);e.setAttribute("style",`transform: scale(${s});`)}),100),m=h,u=([t,e,s,n=0])=>`<div class="${"bullet bor "+(n?"a":"")}" style="${`width:${s}px;height:${s}px;transform:translate(${t}px, ${e}px);`}"></div>`,f=(t="",e="",s="",n="",i=45,a=!1)=>`<div id="bt-${t}" class="btn-w"><button id=${t} class="btn bor ${s}" style="width: ${i}px;height:${i}px;" ${a?"disabled":""}>${e}</button>${""!==n?`<span>${n}</span>`:""}</div>`,y=(t=23,e="")=>`<div class="sta"><div style="font-size: ${t}px;">★</div>${""!==e?`<div>${e}</div>`:""}</div>`,b=(t,e)=>{const s=t.x,n=t.x+t.size,i=t.y,a=t.y+t.size,o=e.x,l=e.x+e.size,r=e.y,d=e.y+e.size;return!(n<=o||s>=l)&&!(a<=r||i>=d)},g=t=>{let e=!1,s={x:0,y:0,size:0};for(;!e;){const n=i(10,402),a=i(70,722),o=i(40,120);s={x:n,y:a,size:o},s.x>=10&&s.y>=70&&s.x+s.size<=402&&s.y+s.size<=722&&!t.some((t=>b(t,s)))&&(e=!0)}return s},w=[[0,15,[[169,276,74],[127,347,74],[211,347,74]]],[0,20,[[84,460,64],[130,386,64],[174,313,64],[218,238,64],[263,161,64]]],[0,30,[[110,156,77],[225,156,77],[225,298,77],[110,298,77],[110,443,77],[225,443,77],[109,245,39],[161,245,39],[212,245,39],[264,245,39],[264,389,39],[212,389,39],[161,389,39],[109,389,39]]],[0,25,[[144,244,32],[190,233,32],[237,244,32],[271,277,32],[109,277,32],[285,325,32],[96,325,32],[271,371,32],[109,371,32],[237,408,32],[190,420,32],[144,408,32],[148,284,116]]],[0,40,[[52,188,77],[283,188,77],[52,419,77],[283,419,77],[145,187,32],[191,187,32],[237,187,32],[145,233,32],[145,420,32],[145,466,32],[191,420,32],[191,466,32],[191,233,32],[237,233,32],[237,420,32],[237,466,32],[51,277,32],[51,325,32],[51,371,32],[96,277,32],[96,325,32],[96,371,32],[329,277,32],[329,325,32],[329,371,32],[285,277,32],[285,325,32],[285,371,32],[148,284,116]]],[0,25,[[174,493,64],[52,419,77],[52,188,77],[283,188,77],[283,419,77],[141,229,39],[187,229,39],[233,229,39],[141,416,39],[187,416,39],[233,416,39],[92,274,39],[92,322,39],[92,367,39],[281,274,39],[281,322,39],[281,367,39]]],[0,15,[[129,220,64],[219,220,64],[129,311,64],[219,311,64],[129,402,64],[219,402,64],[65,292,39],[65,357,39],[312,292,39],[312,357,39]]],[0,10,[[64,209,70],[99,146,70],[168,120,70],[239,138,70],[275,201,70],[251,270,70],[199,324,70],[170,392,70],[162,504,76]]],[0,15,[[34,320,45],[83,291,45],[284,291,45],[284,348,45],[332,320,45],[83,348,45],[131,270,45],[184,260,45],[235,270,45],[131,369,45],[184,379,45],[235,369,45],[174,310,64]]],[0,20,[[341,240,45],[289,240,45],[237,240,45],[184,240,45],[131,240,45],[79,242,45],[341,399,45],[289,398,45],[237,398,45],[184,398,45],[131,398,45],[79,397,45],[39,272,45],[39,367,45],[26,319,45],[103,319,45],[156,319,45],[209,319,45],[262,319,45],[316,319,45]]],[0,20,[[184,162,45],[159,207,45],[209,207,45],[234,252,45],[133,252,45],[106,297,45],[261,297,45],[288,342,45],[79,342,45],[53,386,45],[314,386,45],[339,431,45],[288,431,45],[236,431,45],[184,431,45],[131,431,45],[80,431,45],[29,431,45]]],[0,20,[[180,315,52],[141,277,52],[219,277,52],[219,354,52],[141,354,52],[103,394,52],[258,394,52],[258,238,52],[103,238,52],[64,199,52],[64,431,52],[296,431,52],[296,199,52],[168,200,77],[168,406,77],[65,303,77],[270,303,77]]],[0,25,[[32,316,52],[43,259,52],[76,211,52],[123,179,52],[180,168,52],[237,179,52],[285,211,52],[317,259,52],[328,316,52],[317,372,52],[285,420,52],[237,452,52],[180,464,52],[123,452,52],[76,420,52],[43,372,52]]],[0,15,[[187,426,38],[151,402,36],[190,392,33],[225,402,36],[122,373,33],[156,362,39],[217,362,39],[257,373,33],[187,334,38],[70,243,128],[214,243,128]]],[0,20,[[21,357,45],[57,321,45],[57,393,45],[93,357,45],[92,429,45],[128,392,45],[128,465,45],[165,355,45],[165,429,45],[201,319,45],[201,392,45],[238,355,45],[238,283,45],[274,246,45],[274,319,45],[310,283,45],[310,210,45],[347,246,45]]],[0,25,[[162,298,88],[96,313,58],[259,313,58],[174,392,64],[174,229,64],[180,173,52],[180,459,52],[187,515,39],[187,131,39],[44,322,39],[330,322,39],[190,557,32],[190,95,32]]],[0,20,[[28,232,52],[67,273,52],[67,359,52],[28,400,52],[106,314,52],[143,232,52],[182,273,52],[221,314,52],[182,359,52],[143,400,52],[257,232,52],[297,273,52],[335,314,52],[297,359,52],[257,400,52]]],[0,25,[[99,171,52],[154,162,52],[209,152,52],[265,143,52],[321,133,52],[101,229,33],[101,267,33],[101,306,33],[101,347,33],[101,387,33],[101,426,33],[101,466,33],[336,189,33],[336,227,33],[336,266,33],[336,307,33],[336,347,33],[336,385,33],[336,425,33],[21,473,83],[256,433,83]]],[0,20,[[33,316,52],[43,259,52],[76,211,52],[124,179,52],[180,168,52],[237,179,52],[285,211,52],[317,259,52],[328,316,52],[317,372,52],[285,420,52],[236,453,52],[180,464,52],[120,450,58],[149,413,33],[119,512,33],[84,448,33],[114,426,26],[95,488,26]]],[0,25,[[158,384,95],[125,389,26],[245,365,26],[164,349,26],[193,344,26],[221,349,26],[141,365,26],[261,389,26],[91,354,39],[113,320,39],[147,297,39],[187,289,39],[226,297,39],[260,320,39],[282,354,39],[44,318,51],[285,270,51],[124,238,51],[181,227,51],[237,238,51],[76,270,51],[317,318,51]]]],z=w.length,M=".game-c";let L,j,T,C=-1,P=0,S="default",k=0,E=!1,A=0;const G=()=>[0===i(0,1)?"normal":"reverse",i(1,3)+i(0,9)/10],D=()=>{const[t,e,s]=L[C],n=.5*s-5;return[t+n,e+n]},I=async()=>{const e=((t=0,e=0,s="normal")=>{let n=((new Date).getTime()-e)/1e3*(360/t)%360;return"reverse"===s&&360-n>=0&&(n=360-n),Math.round(n)})(L[C][5],L[C][7],L[C][4]),s=(e-90)*(Math.PI/180),[n,i]=D(),d=Math.cos(s),c=Math.sin(s);let v=n,p=i,h=-1;const m=[0,0],u=L.filter((t=>!t[6])),f=L[C][3],y=t(`#${f}`),b=t(".bullet"),w=C;for(C=-1,o(b,"a");v>=0&&v<=$&&p>=0&&p<=x;){v+=d,p+=c;for(let t=0;t<u.length;t++){const e=u[t][0],s=u[t][1],n=u[t][2],i=e+n/2,a=s+n/2,o=n/2+5;if(Math.sqrt((v-i)**2+(p-a)**2)<=o){h=t,m[0]=v,m[1]=p;break}}if(h>=0)break}o(y,"s"),y.style.display="none";const z=h>=0?m:[v,p];r(b,{transform:`translate(${z[0]}px, ${z[1]}px)`});const j=b?.getAnimations().map((t=>t.finished));if(await Promise.allSettled(j),t(`#${f}`)?.remove(),L.splice(w,1),h>=0){E&&(A++,T.textContent=`${A}`,(()=>{const{x:e,y:s,size:n}=g(L.map((([t,e,s])=>({x:t,y:e,size:s})))),[i,l]=G(),d=[e,s,n,`c-${a()}`,i,l,!1,(new Date).getTime()];L.push(d);const c=document.createElement("div");r(c,{left:`${e}px`,top:`${s}px`,width:`${n}px`,height:`${n}px`}),c.style.setProperty("--s",`${l}s`),c.style.setProperty("--d",i),o(c,"clock bor"),c.id=d[3],t(M)?.append(c)})()),C=L.findIndex((t=>t[3]===u[h][3])),L[C][6]=!0;const e=1===L.length,s="a"+(e?" s":"");o(t(`#${L[C][3]}`),s);const[n,i]=D();r(b,{transform:`translate(${n}px, ${i}px)`}),e&&(S=P>0?"passed":"finalized")}else S="lost";if(l(b,"a"),"default"!==S){let e=`Level ${k+1} ${"lost"===S?"Failed":"Complete"}`,s="lost"===S?"Oh no":"passed"===S?"Great!":"Not Bad!";E?(s=`${A}`,e="Score"):W(),await(I=600,new Promise((t=>setTimeout(t,I))));const n=".game-o";o(t(n),`a mo ${S[0]}`);const i=`${n} .me`;t(`${i} h1`).textContent=s,t(`${i} h3`).textContent=e}var I},q=()=>{const e=E?(()=>{const t=[];for(;t.length<11;){const e=g(t);e&&t.push(e)}return[i(0,10),0,t.map((t=>[t.x,t.y,t.size]))]})():((t=0)=>w[t])(k);C=e[0],P=e[1],A=0,T.textContent=`${P}`,S="default",L=e[2].map((([t,e,s],n)=>{const[i,o]=G();return[t,e,s,`c-${a()}`,i,o,n===C,(new Date).getTime()]})),n(t(M),[L.map((t=>(([t,e,s,n,i,a,o])=>`<div id="${n}" class="${"clock bor "+(o?"a":"")}" style="width:${s}px;height:${s}px;left:${t}px;top:${e}px;--s:${a}s;--d:${i};"></div>`)(t))),u([...D(),10])].flat().join(""))},W=()=>{j&&(clearInterval(j),j=null)},H=()=>{W(),T.textContent=`${P}`,P>0&&(j=setInterval((()=>{P-1>=0?(P--,T.textContent=`${P}`):W()}),1e3))},N=(t=0,e=!1,s=20)=>`<div class="sli wh jc">${c(s).map((n=>{const a=n+s*t,o=i(0,1);return`<div class="sli-w">${f(`b-${a}`,`${a+1}`,"","",60,e)}${o?y():""}</div>`})).join("")}\n</div>`,R=()=>{let s=0;const i=`<div class="pro wh jc"><h2>Select Level</h2>${((t=1)=>`<div class="car"><div class="car-w">${c(t).map((t=>`<div id="s-${t}" class="car-s wh">${N(t)}</div>`)).join("")}</div></div>`)(3)}${f("prev","❮","bta","",40)}${f("next","❯","bta","",40)}${f("main","✕","btm","Main Menu",45)}</div>`;n(t(`#${v}`),i),d((n=>{if(["prev","next"].includes(n))return((n=0)=>{const i=t(".car-w"),a=e(".car-s")[0].offsetWidth;n<0&&(n=0),n>=3&&(n=2),i.scrollTo({left:a*n,behavior:"smooth"}),s=n})(s+("prev"===n?-1:1));if("main"===n)return F();const i=n.split("-");i[1]&&F("Game",{l:+i[1]})}))},B={Game:({l:e=0,f:i=!1})=>{const a=`<div class="game wh ${i?"in":""}"><div class="game-o wh jc"><div class="ti jc"><h1>Game Paused</h1><h3></h3></div>${f("play","➜","","Tap to Resume",140)}${y(90,"With Start")}<div class="me jc"><h1></h1><h3></h3></div><div class="t jc">${f("main","✕","","Main Menu",80)}${f("run","↺","","Run Again",80)}${f("next","❯","","Next Level",80)}</div></div><div class="game-t"><div class="t"><div class="s">${y()}<span>Time</span></div><div class="c">00</div></div>${f("pause","||","bt")}</div><div class="game-c wh"></div></div>`;n(t(`#${v}`),a),((e=0,n=!1)=>{k=e,E=n,T=t(".game-t .c"),q(),s(t(M),"click",(()=>{"default"===S&&C>=0&&(I(),!j&&P>0&&H())})),d((e=>{const s=".game-o";W(),["play","next","run"].includes(e)&&l(t(s),"a l p f mo"),"pause"===e&&(o(t(s),"a"),E||(t(`${s} .ti h3`).textContent=`Level - ${k+1}`)),"play"===e&&H(),"run"===e&&(S="default",q()),"next"===e&&k+1<z&&(k++,S="default",q()),"main"===e&&F()}))})(e,i)},Lobby:()=>{const e=`<div class="lobby wh">\n    <div class="lobby-b">\n      ${[["progress","❯❯"],["infinite","∞"]].map((t=>f(t[0],t[1],"lobby-bu",t[0],100))).join("")} \n    </div>\n  </div>`;n(t(`#${v}`),e),d((t=>{"infinite"===t&&F("Game",{f:!0}),"progress"===t&&F("Progress")}))},Progress:R},F=(t="Lobby",e={})=>B[t](e);n(t("#root"),p()),F(),s(document,"contextmenu",(t=>t.preventDefault())),window.addEventListener("resize",m),m()})();