(()=>{"use strict";const t=document.querySelector.bind(document),e=document.querySelectorAll.bind(document),s=(t,e,s)=>t?.addEventListener(e,s),i=(t,e)=>{t&&(t.innerHTML=e)},n=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,a=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),o=(t,e="")=>{t&&e.split(" ").forEach((e=>{t.classList.add(e)}))},l=(t,e="")=>{t&&e.split(" ").forEach((e=>{t.classList.remove(e)}))},r=(t,e)=>{if(t)for(const s in e)t.style[s]=e[s]},d=t=>{e("button").forEach((e=>{s(e,"click",(e=>{t(e.target.id)}))}))},c=(t=1)=>Array.from({length:t},((t,e)=>e)),x=732,$=412,v="container",m=()=>`<div id="${v}" style="overflow: hidden;width:412px;height:732px"></div>`,p=((t,e)=>{var s;return function(){clearTimeout(s),s=setTimeout(t,e)}})((()=>{const e=t("#root"),s=Math.min(window.innerWidth/$,window.innerHeight/x);e.setAttribute("style",`transform: scale(${s});`)}),100),h=p,u=([t,e,s,i=0])=>`<div class="${"bullet bor "+(i?"a":"")}" style="${`width:${s}px;height:${s}px;transform:translate(${t}px, ${e}px);`}"></div>`,f=(t="",e="",s="",i="",n=45,a=!1)=>`<div id="bt-${t}" class="btn-w"><button id=${t} class="btn bor ${s}" style="width: ${n}px;height:${n}px;" ${a?"disabled":""}>${e}</button>${""!==i?`<span>${i}</span>`:""}</div>`,y=(t=23,e="")=>`<div class="sta"><div style="font-size: ${t}px;">★</div>${""!==e?`<div>${e}</div>`:""}</div>`,b=(t,e)=>{const s=t.x,i=t.x+t.size,n=t.y,a=t.y+t.size,o=e.x,l=e.x+e.size,r=e.y,d=e.y+e.size;return!(i<=o||s>=l)&&!(a<=r||n>=d)},g=t=>{let e=!1,s={x:0,y:0,size:0};for(;!e;){const i=n(10,402),a=n(70,722),o=n(40,120);s={x:i,y:a,size:o},s.x>=10&&s.y>=70&&s.x+s.size<=402&&s.y+s.size<=722&&!t.some((t=>b(t,s)))&&(e=!0)}return s},w=[[0,15,[[169,276,74],[127,347,74],[211,347,74]]],[0,20,[[84,460,64],[130,386,64],[174,313,64],[218,238,64],[263,161,64]]],[0,30,[[110,156,77],[225,156,77],[225,298,77],[110,298,77],[110,443,77],[225,443,77],[109,245,39],[161,245,39],[212,245,39],[264,245,39],[264,389,39],[212,389,39],[161,389,39],[109,389,39]]],[0,25,[[144,244,32],[190,233,32],[237,244,32],[271,277,32],[109,277,32],[285,325,32],[96,325,32],[271,371,32],[109,371,32],[237,408,32],[190,420,32],[144,408,32],[148,284,116]]],[0,40,[[52,188,77],[283,188,77],[52,419,77],[283,419,77],[145,187,32],[191,187,32],[237,187,32],[145,233,32],[145,420,32],[145,466,32],[191,420,32],[191,466,32],[191,233,32],[237,233,32],[237,420,32],[237,466,32],[51,277,32],[51,325,32],[51,371,32],[96,277,32],[96,325,32],[96,371,32],[329,277,32],[329,325,32],[329,371,32],[285,277,32],[285,325,32],[285,371,32],[148,284,116]]],[0,25,[[174,493,64],[52,419,77],[52,188,77],[283,188,77],[283,419,77],[141,229,39],[187,229,39],[233,229,39],[141,416,39],[187,416,39],[233,416,39],[92,274,39],[92,322,39],[92,367,39],[281,274,39],[281,322,39],[281,367,39]]],[0,15,[[129,220,64],[219,220,64],[129,311,64],[219,311,64],[129,402,64],[219,402,64],[65,292,39],[65,357,39],[312,292,39],[312,357,39]]],[0,10,[[64,209,70],[99,146,70],[168,120,70],[239,138,70],[275,201,70],[251,270,70],[199,324,70],[170,392,70],[162,504,76]]],[0,15,[[34,320,45],[83,291,45],[284,291,45],[284,348,45],[332,320,45],[83,348,45],[131,270,45],[184,260,45],[235,270,45],[131,369,45],[184,379,45],[235,369,45],[174,310,64]]],[0,20,[[341,240,45],[289,240,45],[237,240,45],[184,240,45],[131,240,45],[79,242,45],[341,399,45],[289,398,45],[237,398,45],[184,398,45],[131,398,45],[79,397,45],[39,272,45],[39,367,45],[26,319,45],[103,319,45],[156,319,45],[209,319,45],[262,319,45],[316,319,45]]]],z=w.length,M=".game-c";let L,j,T,P=-1,C=0,k="default",E=0,G=!1;const S=()=>[0===n(0,1)?"normal":"reverse",n(1,3)+n(0,9)/10],A=()=>{const[t,e,s]=L[P],i=.5*s-5;return[t+i,e+i]},D=async()=>{const e=((t=0,e=0,s="normal")=>{let i=((new Date).getTime()-e)/1e3*(360/t)%360;return"reverse"===s&&360-i>=0&&(i=360-i),Math.round(i)})(L[P][5],L[P][7],L[P][4]),s=(e-90)*(Math.PI/180),[i,n]=A(),d=Math.cos(s),c=Math.sin(s);let v=i,m=n,p=-1;const h=[0,0],u=L.filter((t=>!t[6])),f=L[P][3],y=t(`#${f}`),b=t(".bullet"),w=P;for(P=-1,o(b,"a");v>=0&&v<=$&&m>=0&&m<=x;){v+=d,m+=c;for(let t=0;t<u.length;t++){const e=u[t][0],s=u[t][1],i=u[t][2],n=e+i/2,a=s+i/2,o=i/2+5;if(Math.sqrt((v-n)**2+(m-a)**2)<=o){p=t,h[0]=v,h[1]=m;break}}if(p>=0)break}o(y,"s"),y.style.display="none";const z=p>=0?h:[v,m];r(b,{transform:`translate(${z[0]}px, ${z[1]}px)`});const j=b?.getAnimations().map((t=>t.finished));if(await Promise.allSettled(j),t(`#${f}`)?.remove(),L.splice(w,1),p>=0){G&&(()=>{const{x:e,y:s,size:i}=g(L.map((([t,e,s])=>({x:t,y:e,size:s})))),[n,l]=S(),d=[e,s,i,`c-${a()}`,n,l,!1,(new Date).getTime()];L.push(d);const c=document.createElement("div");r(c,{left:`${e}px`,top:`${s}px`,width:`${i}px`,height:`${i}px`}),c.style.setProperty("--s",`${l}s`),c.style.setProperty("--d",n),o(c,"clock bor"),c.id=d[3],t(M)?.append(c)})(),P=L.findIndex((t=>t[3]===u[p][3])),L[P][6]=!0;const e=1===L.length,s="a"+(e?" s":"");o(t(`#${L[P][3]}`),s);const[i,n]=A();r(b,{transform:`translate(${i}px, ${n}px)`}),e&&(k=C>0?"passed":"finalized")}else k="lost";if(l(b,"a"),"default"!==k){G||q(),await(T=600,new Promise((t=>setTimeout(t,T))));const e=".game-o";o(t(e),`a mo ${k[0]}`);const s="lost"===k?"Failed":"Complete",i="lost"===k?"Oh no":"passed"===k?"Great!":"Not Bad!",n=`${e} .me`;t(`${n} h1`).textContent=i,t(`${n} h3`).textContent=`Level ${E+1} ${s}`}var T},I=()=>{const e=G?(()=>{const t=[];for(;t.length<11;){const e=g(t);e&&t.push(e)}return[n(0,10),0,t.map((t=>[t.x,t.y,t.size]))]})():((t=0)=>w[t])(E);P=e[0],C=e[1],T.textContent=`${C}`,k="default",L=e[2].map((([t,e,s],i)=>{const[n,o]=S();return[t,e,s,`c-${a()}`,n,o,i===P,(new Date).getTime()]})),i(t(M),[L.map((t=>(([t,e,s,i,n,a,o])=>`<div id="${i}" class="${"clock bor "+(o?"a":"")}" style="width:${s}px;height:${s}px;left:${t}px;top:${e}px;--s:${a}s;--d:${n};"></div>`)(t))),u([...A(),10])].flat().join(""))},q=()=>{j&&(clearInterval(j),j=null)},W=()=>{q(),T.textContent=`${C}`,C>0&&(j=setInterval((()=>{C-1>=0?(C--,T.textContent=`${C}`):q()}),1e3))},H=(t=0,e=!1,s=20)=>`<div class="sli wh jc">${c(s).map((i=>{const a=i+s*t,o=n(0,1);return`<div class="sli-w">${f(`b-${a}`,`${a+1}`,"","",60,e)}${o?y():""}</div>`})).join("")}\n</div>`,N=()=>{let s=0;const n=`<div class="pro wh jc"><h2>Select Level</h2>${((t=1)=>`<div class="car"><div class="car-w">${c(t).map((t=>`<div id="s-${t}" class="car-s wh">${H(t)}</div>`)).join("")}</div></div>`)(3)}${f("prev","❮","bta","",40)}${f("next","❯","bta","",40)}${f("main","✕","btm","Main Menu",45)}</div>`;i(t(`#${v}`),n),d((i=>{if(["prev","next"].includes(i))return((i=0)=>{const n=t(".car-w"),a=e(".car-s")[0].offsetWidth;i<0&&(i=0),i>=3&&(i=2),n.scrollTo({left:a*i,behavior:"smooth"}),s=i})(s+("prev"===i?-1:1));if("main"===i)return B();const n=i.split("-");n[1]&&B("Game",{l:+n[1]})}))},R={Game:({l:e=0,f:n=!1})=>{const a=`<div class="game wh"><div class="game-o wh jc"><div class="ti jc"><h1>Game Paused</h1><h3></h3></div>${f("play","➜","","Tap to Resume",140)}${y(90,"With Start")}<div class="me jc"><h1></h1><h3></h3></div><div class="t jc">${f("main","✕","","Main Menu",80)}${f("run","↺","","Run Again",80)}${f("next","❯","","Next Level",80)}</div></div><div class="game-t"><div class="t"><div class="s">${y()}<span>Time</span></div><div class="c">00</div></div>${f("pause","||","bt")}</div><div class="game-c wh"></div></div>`;i(t(`#${v}`),a),((e=0,i=!1)=>{E=e,G=i,T=t(".game-t .c"),I(),s(t(M),"click",(()=>{"default"===k&&P>=0&&(D(),!j&&C>0&&W())})),d((e=>{const s=".game-o";q(),["play","next","run"].includes(e)&&l(t(s),"a l p f mo"),"pause"===e&&(o(t(s),"a"),t(`${s} .ti h3`).textContent=`Level - ${E+1}`),"play"===e&&W(),"run"===e&&(k="default",I()),"next"===e&&E+1<z&&(E++,k="default",I()),"main"===e&&B()}))})(e,n)},Lobby:()=>{const e=`<div class="lobby wh">\n    <div class="lobby-b">\n      ${[["progress","❯❯"],["infinite","∞"]].map((t=>f(t[0],t[1],"lobby-bu",t[0],100))).join("")} \n    </div>\n  </div>`;i(t(`#${v}`),e),d((t=>{"infinite"===t&&B("Game",{f:!0}),"progress"===t&&B("Progress")}))},Progress:N},B=(t="Lobby",e={})=>R[t](e);i(t("#root"),m()),B("Game",{l:0,f:!0}),s(document,"contextmenu",(t=>t.preventDefault())),window.addEventListener("resize",h),h()})();