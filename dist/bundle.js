(()=>{"use strict";const t=document.querySelector.bind(document),e=document.querySelectorAll.bind(document),s=(t,e,s)=>t?.addEventListener(e,s),n=(t,e)=>{t&&(t.innerHTML=e)},a=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,i=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),o=(t,e="")=>{t&&e.split(" ").forEach((e=>{t.classList.add(e)}))},r=(t,e="")=>{t&&e.split(" ").forEach((e=>{t.classList.remove(e)}))},l=(t,e)=>{if(t)for(const s in e)t.style[s]=e[s]},c=t=>{e("button").forEach((e=>{s(e,"click",(e=>{t(e.target.id)}))}))},d=(t=1)=>Array.from({length:t},((t,e)=>e)),h=732,$=412,m="container",v=["#03afd4","#02aa01","#dd6502","#9302f2","#305983","#305983","#038ff1","#3a6542","#f2c403","#333d3d"],p="THIRTEEN_HOURS",x=()=>{const t=localStorage.getItem(p)||"";return""!==t&&((t="")=>{try{return JSON.parse(t),!0}catch(t){return!1}})(t)?JSON.parse(t):{}},u=(t,e)=>{const s=x();s[t]=e,(t=>{const e=JSON.stringify(t);localStorage.setItem(p,e)})(s)},f="show",b="color",g="sel",y=()=>t("#bt-theme span"),w=()=>y()?.classList?.contains(f),j=(t=0)=>t>=0&&t<v.length,k=(e=0)=>{if(j(e)){r(t(`#col-${z()}`),g),o(t(`#col-${e}`),g),u(b,e);const s=v[e];document.documentElement.style.setProperty("--bs",s);const n=t("meta[name=theme-color]");n&&n.setAttribute("content",s)}},z=()=>{const t=((t="",e)=>x()[t]??e)(b,6);return j(t)?t:6},M=()=>(k(z()),`<div id="${m}" style="overflow: hidden;width:412px;height:732px"></div>`),S=((t,e)=>{var s;return function(){clearTimeout(s),s=setTimeout(t,e)}})((()=>{const e=t("#root"),s=Math.min(window.innerWidth/$,window.innerHeight/h);e.setAttribute("style",`transform: scale(${s});`)}),100),L=S,T=([t,e,s,n=0])=>`<div class="${"bullet bor "+(n?"a":"")}" style="${`width:${s}px;height:${s}px;transform:translate(${t}px, ${e}px);`}"></div>`,P=([t=0,e=0,s=50,n="clo",a="normal",i="5",o=!0])=>`<div id="${n}" class="${"clock bor "+(o?"a":"")}" style="${`width:${s}px;height:${s}px;left:${t}px;top:${e}px;--s:${i}s;--d:${a};`}"></div>`,E=(t="",e="",s="",n="",a=45,i=!1)=>`<div id="bt-${t}" class="btn-w"><button id=${t} class="btn bor ${s}" style="width: ${a}px;height:${a}px;" ${i?"disabled":""}>${e}</button>${""!==n?`<span>${n}</span>`:""}</div>`,C=(t=23,e="")=>`<div class="sta"><div style="font-size: ${t}px;">★</div>${""!==e?`<div>${e}</div>`:""}</div>`,I=(t,e)=>{const s=t.x,n=t.x+t.size,a=t.y,i=t.y+t.size,o=e.x,r=e.x+e.size,l=e.y,c=e.y+e.size;return!(n<=o||s>=r)&&!(i<=l||a>=c)},H=t=>{let e=!1,s={x:0,y:0,size:0};for(;!e;){const n=a(10,402),i=a(70,722),o=a(40,120);s={x:n,y:i,size:o},s.x>=10&&s.y>=70&&s.x+s.size<=402&&s.y+s.size<=722&&!t.some((t=>I(t,s)))&&(e=!0)}return s},A=[[0,15,[[169,276,74],[127,347,74],[211,347,74]]],[0,20,[[84,460,64],[130,386,64],[174,313,64],[218,238,64],[263,161,64]]],[0,30,[[110,156,77],[225,156,77],[225,298,77],[110,298,77],[110,443,77],[225,443,77],[109,245,39],[161,245,39],[212,245,39],[264,245,39],[264,389,39],[212,389,39],[161,389,39],[109,389,39]]],[0,25,[[144,244,32],[190,233,32],[237,244,32],[271,277,32],[109,277,32],[285,325,32],[96,325,32],[271,371,32],[109,371,32],[237,408,32],[190,420,32],[144,408,32],[148,284,116]]],[0,40,[[52,188,77],[283,188,77],[52,419,77],[283,419,77],[145,187,32],[191,187,32],[237,187,32],[145,233,32],[145,420,32],[145,466,32],[191,420,32],[191,466,32],[191,233,32],[237,233,32],[237,420,32],[237,466,32],[51,277,32],[51,325,32],[51,371,32],[96,277,32],[96,325,32],[96,371,32],[329,277,32],[329,325,32],[329,371,32],[285,277,32],[285,325,32],[285,371,32],[148,284,116]]],[0,25,[[174,493,64],[52,419,77],[52,188,77],[283,188,77],[283,419,77],[141,229,39],[187,229,39],[233,229,39],[141,416,39],[187,416,39],[233,416,39],[92,274,39],[92,322,39],[92,367,39],[281,274,39],[281,322,39],[281,367,39]]],[0,15,[[129,220,64],[219,220,64],[129,311,64],[219,311,64],[129,402,64],[219,402,64],[65,292,39],[65,357,39],[312,292,39],[312,357,39]]],[0,10,[[64,209,70],[99,146,70],[168,120,70],[239,138,70],[275,201,70],[251,270,70],[199,324,70],[170,392,70],[162,504,76]]],[0,15,[[34,320,45],[83,291,45],[284,291,45],[284,348,45],[332,320,45],[83,348,45],[131,270,45],[184,260,45],[235,270,45],[131,369,45],[184,379,45],[235,369,45],[174,310,64]]],[0,20,[[341,240,45],[289,240,45],[237,240,45],[184,240,45],[131,240,45],[79,242,45],[341,399,45],[289,398,45],[237,398,45],[184,398,45],[131,398,45],[79,397,45],[39,272,45],[39,367,45],[26,319,45],[103,319,45],[156,319,45],[209,319,45],[262,319,45],[316,319,45]]],[0,20,[[184,162,45],[159,207,45],[209,207,45],[234,252,45],[133,252,45],[106,297,45],[261,297,45],[288,342,45],[79,342,45],[53,386,45],[314,386,45],[339,431,45],[288,431,45],[236,431,45],[184,431,45],[131,431,45],[80,431,45],[29,431,45]]],[0,20,[[180,315,52],[141,277,52],[219,277,52],[219,354,52],[141,354,52],[103,394,52],[258,394,52],[258,238,52],[103,238,52],[64,199,52],[64,431,52],[296,431,52],[296,199,52],[168,200,77],[168,406,77],[65,303,77],[270,303,77]]],[0,25,[[32,316,52],[43,259,52],[76,211,52],[123,179,52],[180,168,52],[237,179,52],[285,211,52],[317,259,52],[328,316,52],[317,372,52],[285,420,52],[237,452,52],[180,464,52],[123,452,52],[76,420,52],[43,372,52]]],[0,15,[[187,426,38],[151,402,36],[190,392,33],[225,402,36],[122,373,33],[156,362,39],[217,362,39],[257,373,33],[187,334,38],[70,243,128],[214,243,128]]],[0,20,[[21,357,45],[57,321,45],[57,393,45],[93,357,45],[92,429,45],[128,392,45],[128,465,45],[165,355,45],[165,429,45],[201,319,45],[201,392,45],[238,355,45],[238,283,45],[274,246,45],[274,319,45],[310,283,45],[310,210,45],[347,246,45]]],[0,25,[[162,298,88],[96,313,58],[259,313,58],[174,392,64],[174,229,64],[180,173,52],[180,459,52],[187,515,39],[187,131,39],[44,322,39],[330,322,39],[190,557,32],[190,95,32]]],[0,20,[[28,232,52],[67,273,52],[67,359,52],[28,400,52],[106,314,52],[143,232,52],[182,273,52],[221,314,52],[182,359,52],[143,400,52],[257,232,52],[297,273,52],[335,314,52],[297,359,52],[257,400,52]]],[0,25,[[99,171,52],[154,162,52],[209,152,52],[265,143,52],[321,133,52],[101,229,33],[101,267,33],[101,306,33],[101,347,33],[101,387,33],[101,426,33],[101,466,33],[336,189,33],[336,227,33],[336,266,33],[336,307,33],[336,347,33],[336,385,33],[336,425,33],[21,473,83],[256,433,83]]],[0,20,[[33,316,52],[43,259,52],[76,211,52],[124,179,52],[180,168,52],[237,179,52],[285,211,52],[317,259,52],[328,316,52],[317,372,52],[285,420,52],[236,453,52],[180,464,52],[120,450,58],[149,413,33],[119,512,33],[84,448,33],[114,426,26],[95,488,26]]],[0,25,[[158,384,95],[125,389,26],[245,365,26],[164,349,26],[193,344,26],[221,349,26],[141,365,26],[261,389,26],[91,354,39],[113,320,39],[147,297,39],[187,289,39],[226,297,39],[260,320,39],[282,354,39],[44,318,51],[285,270,51],[124,238,51],[181,227,51],[237,238,51],[76,270,51],[317,318,51]]],[0,20,[[34,62,82],[55,146,71],[73,218,65],[89,283,58],[103,342,51],[149,311,52],[194,280,52],[204,333,52],[213,385,52],[220,439,52],[270,418,46],[313,395,46],[324,444,39],[331,485,37],[339,524,33],[345,559,30],[350,592,27]]],[0,25,[[183,139,47],[211,187,47],[154,187,47],[133,235,47],[232,235,47],[246,284,47],[119,284,47],[113,336,47],[252,336,47],[119,391,47],[246,391,47],[133,440,47],[232,440,47],[154,490,47],[211,490,47],[183,538,47],[190,231,33]]],[0,25,[[190,473,32],[157,487,32],[223,487,32],[187,433,38],[187,393,38],[187,354,38],[161,262,90],[187,223,38],[188,185,36],[193,158,26],[114,313,51],[247,313,51],[72,341,46],[294,341,46],[37,368,39],[337,368,39],[15,394,27],[372,394,27],[320,316,27],[65,316,27],[120,284,27],[265,284,27]]]],N=A.length,G=".game-c";let O,R,D,J=-1,_=0,q="default",W=0,U=!1,B=0;const F=()=>[0===a(0,1)?"normal":"reverse",a(1,3)+a(0,9)/10],K=()=>{const[t,e,s]=O[J],n=.5*s-5;return[t+n,e+n]},Q=async()=>{const e=((t=0,e=0,s="normal")=>{let n=((new Date).getTime()-e)/1e3*(360/t)%360;return"reverse"===s&&360-n>=0&&(n=360-n),Math.round(n)})(O[J][5],O[J][7],O[J][4]),s=(e-90)*(Math.PI/180),[n,a]=K(),c=Math.cos(s),d=Math.sin(s);let m=n,v=a,p=-1;const x=[0,0],u=O.filter((t=>!t[6])),f=O[J][3],b=t(`#${f}`),g=t(".bullet"),y=J;J=-1,o(g,"a");let w=0;for(;m>=0&&m<=$&&v>=0&&v<=h;)if(m+=c,v+=d,p<0)for(let t=0;t<u.length;t++){const e=u[t][0],s=u[t][1],n=u[t][2],a=e+n/2,i=s+n/2,o=n/2+5;Math.sqrt((m-a)**2+(v-i)**2)<=o&&(p=t)}else if(w++,10===w){x[0]=m,x[1]=v;break}o(b,"s"),t(`#${f}`)?.remove(),O.splice(y,1);const j=p>=0?x:[m,v];l(g,{transform:`translate(${j[0]}px, ${j[1]}px)`});const k=g?.getAnimations().map((t=>t.finished));if(await Promise.allSettled(k),p>=0){U&&(B++,D.textContent=`${B}`,(()=>{const{x:e,y:s,size:n}=H(O.map((([t,e,s])=>({x:t,y:e,size:s})))),[a,r]=F(),c=[e,s,n,`c-${i()}`,a,r,!1,(new Date).getTime()];O.push(c);const d=document.createElement("div");l(d,{left:`${e}px`,top:`${s}px`,width:`${n}px`,height:`${n}px`}),d.style.setProperty("--s",`${r}s`),d.style.setProperty("--d",a),o(d,"clock bor"),d.id=c[3],t(G)?.append(d)})()),J=O.findIndex((t=>t[3]===u[p][3])),O[J][6]=!0;const e=1===O.length,s="a co"+(e?" s":"");o(t(`#${O[J][3]}`),s);const[n,a]=K();l(g,{transform:`translate(${n}px, ${a}px)`}),e&&(q=_>0?"passed":"finalized")}else q="lost";if(r(g,"a"),"default"!==q){let e=`Level ${W+1} ${"lost"===q?"Failed":"Complete"}`,s="lost"===q?"Oh no":"passed"===q?"Great!":"Not Bad!";U?(s=`${B}`,e="Score"):X(),await(z=600,new Promise((t=>setTimeout(t,z))));const n=".game-o";o(t(n),`a mo ${q[0]}`);const a=`${n} .me`;t(`${a} h1`).textContent=s,t(`${a} h3`).textContent=e}var z},V=()=>{const e=U?(()=>{const t=[];for(;t.length<11;){const e=H(t);e&&t.push(e)}return[a(0,10),0,t.map((t=>[t.x,t.y,t.size]))]})():((t=0)=>A[t])(W);J=e[0],_=e[1],B=0,D.textContent=`${_}`,q="default",O=e[2].map((([t,e,s],n)=>{const[a,o]=F();return[t,e,s,`c-${i()}`,a,o,n===J,(new Date).getTime()]})),n(t(G),[O.map((t=>P(t))),T([...K(),10])].flat().join(""))},X=()=>{R&&(clearInterval(R),R=null)},Y=()=>{X(),D.textContent=`${_}`,_>0&&(R=setInterval((()=>{_-1>=0?(_--,D.textContent=`${_}`):X()}),1e3))},Z=(t=0,e=!1,s=20)=>`<div class="sli wh jc">${d(s).map((n=>{const i=n+s*t,o=a(0,1);return`<div class="sli-w">${E(`b-${i}`,`${i+1}`,"","",60,e)}${o?C():""}</div>`})).join("")}\n</div>`,tt=()=>{let s=0;const a=`<div class="pro wh jc"><h2>Select Level</h2>${((t=1)=>`<div class="car"><div class="car-w">${d(t).map((t=>`<div id="s-${t}" class="car-s wh">${Z(t)}</div>`)).join("")}</div></div>`)(3)}${E("prev","❮","bta","",40)}${E("next","❯","bta","",40)}${E("main","✕","btm","Main Menu",45)}</div>`;n(t(`#${m}`),a),c((n=>{if(["prev","next"].includes(n))return((n=0)=>{const a=t(".car-w"),i=e(".car-s")[0].offsetWidth;n<0&&(n=0),n>=3&&(n=2),a.scrollTo({left:i*n,behavior:"smooth"}),s=n})(s+("prev"===n?-1:1));if("main"===n)return st();const a=n.split("-");a[1]&&st("Game",{l:+a[1]})}))},et={Game:({l:e=0,f:a=!1})=>{const i=`<div class="game wh ${a?"in":""}"><div class="game-o wh jc"><div class="ti jc"><h1>Game Paused</h1><h3></h3></div>${E("play","➜","","Tap to Resume",140)}${C(90,"With Start")}<div class="me jc"><h1></h1><h3></h3></div><div class="t jc">${E("main","✕","","Main Menu",80)}${E("run","↺","","Run Again",80)}${E("next","❯","","Next Level",80)}</div></div><div class="game-t"><div class="t"><div class="s">${C()}<span>Time</span></div><div class="c">00</div></div>${E("pause","||","bt")}</div><div class="game-c wh"></div></div>`;n(t(`#${m}`),i),((e=0,n=!1)=>{W=e,U=n,D=t(".game-t .c"),V(),s(t(G),"click",(()=>{"default"===q&&J>=0&&(Q(),!R&&_>0&&Y())})),c((e=>{const s=".game-o";X(),["play","next","run"].includes(e)&&r(t(s),"a l p f mo"),"pause"===e&&(o(t(s),"a"),U||(t(`${s} .ti h3`).textContent=`Level - ${W+1}`)),"play"===e&&Y(),"run"===e&&(q="default",V()),"next"===e&&W+1<N&&(W++,q="default",V()),"main"===e&&st()}))})(e,a)},Lobby:()=>{const e=`<div class="lobby wh jc"><div class="logo"><span>13 H</span>${P([137,10])}<span id="l2">urs</span></div><div class="lobby-b"><div class="lobby-s jc">${[["progress","✩"],["infinite","∞"]].map((t=>E(t[0],t[1],"lobby-bu",t[0],130))).join("")}</div><div class="lobby-o jc"><a href="https://bio.link/jorgerub" target="_blank" class="btn bor jc">☻</a>${[["theme","⚙"],["sounds","♫"],["share","⛓"]].map((t=>E(t[0],t[1],"","theme"===t[0]?`<div class="th jc">\n  ${v.map(((t,e)=>`<button class="bor" id="col-${e}" style="background:${t}"></button>`)).join("")}\n</div>`:"",60))).join("")}</div><a href="https://js13kgames.com/" target="_blank" class="lobby-l jc">Js13k 2024</a></div></div>`;n(t(`#${m}`),e);const a=((e,n)=>{const a=t("body"),i=t=>{e.contains(t.target)||(n(),t.stopPropagation())};return s(a,"click",i),()=>{a.removeEventListener("click",i)}})(t("#bt-theme"),(()=>w()&&r(y(),f)));c((e=>{if(["infinite","progress"].includes(e)){let t="Progress",s={};"infinite"===e&&(t="Game",s={f:!0}),a(),st(t,s)}var s;"share"===e&&(s={title:"🕗 13 Hours",text:"Play 13 Hours",url:window.location.href},"share"in navigator?navigator.share(s).then((t=>alert("Thanks for sharing!"))).catch((()=>alert("Sharing failed :("))):window.open(`https://x.com/share?url=${encodeURIComponent(s.url||"")}`,"_blank")),"theme"===e&&(()=>{const e=y(),s={a:o,r},n=w();s[n?"r":"a"](e,f),n||o(t(`#col-${z()}`),g)})(),e.includes("col-")&&k(+e.split("-")[1])}))},Progress:tt},st=(t="Lobby",e={})=>et[t](e);n(t("#root"),M()),st(),s(document,"contextmenu",(t=>t.preventDefault())),window.addEventListener("resize",L),L()})();