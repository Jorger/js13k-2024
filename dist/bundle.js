(()=>{"use strict";const t=document.querySelector.bind(document),e=document.querySelectorAll.bind(document),n=(t,e,n)=>t?.addEventListener(e,n),s=(t,e)=>{t&&(t.innerHTML=e)},a=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,i=(t,e="")=>{t&&e.split(" ").forEach((e=>{t.classList.add(e)}))},o=(t,e)=>{if(t)for(const n in e)t.style[n]=e[n]},r=412,l="container",c=()=>`<div id="${l}" style="overflow: hidden;width:412px;height:732px"></div>`,d=([t,e,n,s=0])=>`<div class="${"bullet "+(s?"a":"")}" style="${`width:${n}px;height:${n}px;transform:translate(${t}px, ${e}px);`}"></div>`,x=[[2,30,[[47,135,138],[202,320,98],[292,455,61]]],[0,30,[[110,156,77],[225,156,77],[225,298,77],[110,298,77],[110,443,77],[225,443,77],[109,245,39],[161,245,39],[212,245,39],[264,245,39],[264,389,39],[212,389,39],[161,389,39],[109,389,39]]],[5,30,[[301,116,24],[131,370,26],[134,601,96],[32,559,96],[245,473,31],[94,649,39],[319,87,39],[268,139,64],[261,200,36],[248,237,36],[234,274,36],[221,309,36],[207,344,37],[195,381,37],[179,417,40],[78,496,64],[175,542,60],[218,597,26],[54,533,26],[186,460,28],[113,394,35],[107,428,76],[177,485,21],[195,486,57],[143,504,50],[123,551,51]]],[1,20,[[56,356,128],[227,356,128],[247,215,32],[274,235,32],[290,265,32],[307,294,32],[324,323,32],[338,354,32],[133,215,32],[106,235,32],[90,265,32],[73,294,32],[57,323,32],[41,354,32]]],[0,30,[[158,384,95],[125,389,26],[245,365,26],[164,349,26],[193,344,26],[221,349,26],[141,365,26],[261,389,26],[91,354,39],[113,320,39],[147,297,39],[187,289,39],[226,297,39],[260,320,39],[282,354,39],[44,318,51],[285,270,51],[124,238,51],[181,227,51],[237,238,51],[76,270,51],[317,318,51]]]],m=".game-c";let h,p,v,$=-1,u=0,f=0;const g=(t=0,e="normal")=>{let n=((new Date).getTime()-f)/1e3*(360/t)%360;return"reverse"===e&&360-n>=0&&(n=360-n),Math.round(n)},w=()=>{const[t,e,n]=h[$],s=.5*n-5;return[t+s,e+s]},y=async()=>{const n=(()=>{const[,,,e,n,s]=h[$],a=t(`#${e}`),i=window.getComputedStyle(a,"::before").transform;let o=0;if(i&&"none"!==i){const t=i.split("(")[1].split(")")[0].split(","),e=+t[0],n=+t[1];o=((t=0)=>(t%360+360)%360)(Math.round(Math.atan2(n,e)*(180/Math.PI)))}else o=g(s,n);return o=g(s,n),o})(),s=(n-90)*(Math.PI/180),[a,l]=w(),c=Math.cos(s),d=Math.sin(s);let x=a,p=l,v=-1;const u={x:0,y:0},f=h.filter((t=>!t[6])),[,,,y]=h[$],M=t(`#${y}`),P=t(".bullet"),T=$;$=-1,i(P,"a");const k=e(".tmppath");for(let t=0;t<k.length;t++)k[t].remove();for(;x>=0&&x<=r&&p>=0&&p<=732;){x+=c,p+=d;const e=document.createElement("div");e.style.transform=`translate(${x}px, ${p}px)`,e.style.width="10px",e.style.height="10px",e.className="tmppath",t(m)?.append(e);for(let t=0;t<f.length;t++){const e=f[t][0],n=f[t][1],s=f[t][2],a=e+s/2,i=n+s/2,o=s/2;if(Math.sqrt((x-a)**2+(p-i)**2)<=o){v=t,u.x=x,u.y=p;break}}if(v>=0)break}i(M,"s"),M.style.display="none";const A=v>=0?u:{x,y:p};o(P,{transform:`translate(${A.x}px, ${A.y}px)`});const E=P?.getAnimations().map((t=>t.finished));if(await Promise.allSettled(E),t(`#${y}`)?.remove(),h.splice(T,1),v>=0){$=v,h[$][6]=!0;const e=1===h.length,n="a"+(e?" s":"");i(t(`#${h[$][3]}`),n),((t,e="")=>{t&&e.split(" ").forEach((e=>{t.classList.remove(e)}))})(P,"a");const[s,a]=w();e&&b(),o(P,{transform:`translate(${s}px, ${a}px)`})}else b()},M=(e=0)=>{const n=((t=0)=>x[t])(e);$=n[0],u=n[1],v.textContent=`${u}s`,f=(new Date).getTime(),h=n[2].map((([t,e,n],s)=>{const[i,o]=[0===a(0,1)?"normal":"reverse",a(1,3)+a(0,9)/10];return[t,e,n,`c-${"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}`,i,o,s===$]})),s(t(m),[h.map((t=>(([t,e,n,s,a,i,o])=>`<div id="${s}" class="${"clock "+(o?"a":"")}" style="width:${n}px;height:${n}px;left:${t}px;top:${e}px;--s:${i}s;--d:${a};"></div>`)(t))),d([...w(),10])].flat().join(""))},b=()=>{p&&(clearInterval(p),p=null)},P=(e=0)=>{v=t(".game-t .c"),M(e),n(t(m),"click",(()=>{$>=0&&(y(),!p&&u>0&&(b(),v.textContent=`${u}s`,p=setInterval((()=>{u--,u>=0?v.textContent=`${u}s`:b()}),1e3)))}));const s=t(".game-t .bt");s&&n(s,"click",(()=>{b(),M(e)}))},T=({level:e=0})=>{s(t(`#${l}`),'<div class="game wh"><div class="game-t"><div class="t"><div class="s">★<span>Time</span></div><div class="c">00</div></div><button class="bt">⏸</button></div><div class="game-c wh"></div></div>'),P(e)};var k,A,E;const L=(k=()=>{const e=t("#root");let n=Math.min(window.innerWidth/r,window.innerHeight/732);const s=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);(n>=1||s)&&(n=s?1:n);let a=window.innerWidth<r?Math.round(window.innerWidth/r*100):100;e.setAttribute("style",`zoom: ${a}%; transform: scale(${n});`)},A=100,function(){clearTimeout(E),E=setTimeout(k,A)});s(t("#root"),c()),T({level:2}),n(document,"contextmenu",(t=>t.preventDefault())),window.addEventListener("resize",L),L()})();